---
title: "HW4 MD CityCrime"
---

In this assignment, we will be working with a dataset of total crimes reported by Maryland cities for two consecutive years. You'll load the data, calculate the violent and property crime rates for each city for both years, and then calculate the percentage change in the crime rates between the two years. You'll also write a short story based on your findings.

### Task 1: Load the Tidyverse and Janitor

You will need to load the tidyverse library and the janitor library

```{r}
library(tidyverse)
library(janitor)
```

Then you'll load the data from the web. The URL for the data is: https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_cities_crime_2019_2020.csv. You will create a dataframe called `md_cities` that contains the data from this URL.

### Task 2: Load the Data

```{r}
md_cities <- read_csv("https://raw.githubusercontent.com/dwillis/jour405/refs/heads/main/data/md_cities_crime_2019_2020.csv")
```
### Task 3: Calculating Rates

Calculate violent and property crime rates for each city for both years using `mutate()`. You'll create four new columns: `violent_rate_2019`, `property_rate_2019`, `violent_rate_2020`, and `property_rate_2020`. You'll need to figure out the proper unit rate, given that there are varying populations. There's no perfect choice; choose the one that works best for you. Save the results to a new dataframe called `md_cities_rates`.

```{r}
md_cities_rates <- md_cities |>
  mutate(violent_rate_2019 = violent2019/pop2019 *1000) |>
  mutate(property_rate_2019 = property2019/pop2019 * 1000) |>
  mutate(violent_rate_2020 = violent2020/pop2020 * 1000) |>
  mutate(property_rate_2020 = property2020/pop2020 * 1000) |>
  select(city, county, violent_rate_2019, property_rate_2019, violent_rate_2020, property_rate_2020)
```

### Task 4: Describe the Rates

Examine the new dataframe, `md_cities_rates`, by clicking on it in the Environment tab in RStudio and sorting by the rate columns. Write a couple of sentences about the results, comparing and contrasting the cities with the highest rates (both violent and property) in 2019 and 2020. Do you see any patterns? What does this tell you about crime in Maryland cities? What's the story here?

ANSWER HERE

The top two cities for the highest rates of violent crime are Baltimore and Ocean City. In 2019, Baltimore had the highest rate at 18.34 per thousand people, while Ocean City came in second with 13.10 per thousand people. In 2020, they switched places, with 23.97 per thousand people in Ocean City and 15.97 per thousand in Baltimore. However, Baltimore does not seem distinct when it comes to property crime. On the contrary, Ocean City is at the top for property crime rate in both 2019 and 2020, with 103.69 and 121.28 per thousand people, respectively. The story here could be about why Baltimore is so packed with violent crime, but not property crime, and why Ocean City seems to be the most dangerous city in Maryland, with the highest rates in violent and property crime. Another noticeable thing is that among the top five cities with the highest violent and property crimes rate, besides Ocean City, Elkton and Cambridge are the other cities that appears in both categories. This could be an interesting angle to tell as well.         


### Task 5: Calculate Percentage Change

Let's add two percentage change columns to your dataframe: one for violent crime rates and one for property crime rates. You'll calculate the percentage change between 2019 and 2020 for each city. Save the results to a new dataframe called `md_cities_change`.

```{r}
md_cities_change <- md_cities_rates |>
  mutate(violent_percent_change = ((violent_rate_2020 - violent_rate_2019)/violent_rate_2019) * 100) |>
  mutate(property_percent_change = ((property_rate_2020 - property_rate_2019)/property_rate_2019) * 100) |>
  select(city, county, violent_percent_change, property_percent_change)
```

### Task 7: Describe Percentage Changes

Look at the `md_cities_change` dataframe by clicking on it in the Environment tab in RStudio. Write a couple of sentences describing the percentage change results. What's more interesting here, the patterns or the outliers? What's the story in the data?

ANSWER HERE

I think the percentage changes in a few cities are intriguing. For instance, Edmonston, Prince George's, is the city with the highest increase in the violent crime rate, and Crisfield, Somerset, has the highest increase in the property crime rate. On the other hand, Friendship Heights, Montgomery, is among cities with the highest decrease in violent crime rate with 100% change and is the only city that have 100% decrease in both violent and property crimes rate, meaning either there are 0 violent and property crimes in 2020 or something really went wrong with crime recording in that city. Another interesting angle is that among cities with 100% decrease in violent crimes, Cecilton, Cecil, is the only city where the property crime rate goes up with nearly 200% change. This drastic contrast could be a lede for the story as well.    

### Task 8: Tell the Best Story

Write up a lede and nutgraf of a story with the _best_ story idea you've found in this assignment. The lede should be a single sentence that summarizes the most important information in the data. The nutgraf should be a paragraph that provides more context and explains why the data is important.

ANSWER HERE

Lede:

Ocean City seems to be the most dangerous city in Maryland, with the highest rates in both violent and property crimes. 

Nutgraf:

In 2019, Ocean City, Worcester, had the second-highest rate in violent crime out of all Maryland cities, with about 13 cases per thousand people, before moving up to the highest in 2020 with nearly 24 cases per thousand people. Pattern went the same way with property crime, which Ocean City ranked at the top in the highest rate for 2019 and 2020, with about 104 and 121 cases per thousand people, respectively.   

### Task 9: Save Your Work and Put it on GitHub

Save this notebook, then commit it to your local repository. Push the changes to your GitHub repository and submit the URL for this file in ELMS.

### Task 10.

- Using the 2020 violent crime rate, calculate the percentiles using `ntile()`. Save the results to a new dataframe called `md_cities_percentiles`. How many cities are above the 90th percentile?

```{r}
md_cities_percentiles <- md_cities_rates |>
  mutate(percentile_violent_2020 = ntile(violent_rate_2020, 100)) |>
  select(city, county, violent_rate_2020, percentile_violent_2020)
```

ANSWER: There are 10 cities that are above 90th percentile. 

- Calculate the Interquartile Range of the 2020 violent crime rate using `summarize()` and R's `IQR()` function. The syntax is similar to how `mean()` works.

```{r}
md_cities_percentiles |>
  summarise(
    iqr_violent_2020 = IQR(violent_rate_2020)
  )
```
- Do the results change your best story idea from the previous assignment? Why or why not?

```{r}
#Im gonna find potential outliers from IQR
#Find Q1 and Q3 first
summary(md_cities_percentiles$violent_rate_2020)
```
```{r}
#Q1 - (IQR)(1.5)
0 - (4.2)*(1.5)
#Q3 + (IQR)(1.5)
4.199 + (4.2)*(1.5)
#So outliers are anything that below -6.3 and above 10.499
```
ANSWER : Yes, I think so. From IQR, I can calculate the potential outliers of this dataset, which are any cities that have a violent crime rate below -6.3 or above 10.499. There are five cities—Ocean City, Baltimore, Cambridge, Princess Anne, and Kitzmiller—with a violent crime rate above 10.499, considering outliers or meaning that these 5 cities have an abnormally high violent crime rate compared to other Maryland cities in general, and worth looking into. 

